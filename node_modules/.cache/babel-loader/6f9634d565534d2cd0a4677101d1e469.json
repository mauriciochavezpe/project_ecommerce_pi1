{"ast":null,"code":"var _jsxFileName = \"/Users/echavezp/Desktop/Mauricio/UPC/20231/PI1/CODIGO/ecommerce-mern-heroku/frontend/src/screens/LoginScreen.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Form, Button, Row, Col } from 'react-bootstrap';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Helmet } from 'react-helmet';\nimport Message from '../components/Message';\nimport FormContainer from '../components/FormContainer';\nimport Spinner from '../components/layout/Spinner';\nimport { login, register } from '../actions/userActions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst LoginScreen = _ref => {\n  _s();\n  let {\n    location,\n    history\n  } = _ref;\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [message, setMessage] = useState(null);\n  const [googleName, setGoogleName] = useState('');\n  const [googleEmail, setGoogleEmail] = useState('');\n  const [googleId, setGoogleId] = useState('');\n  const [loginSuccess, setLoginSuccess] = useState(false);\n  const dispatch = useDispatch();\n  const userLogin = useSelector(state => state.userLogin);\n  const {\n    loading,\n    error,\n    userInfo\n  } = userLogin;\n  const redirect = location.search ? location.search.split('=')[1] : '/';\n  useEffect(() => {\n    if (userInfo) {\n      history.push(redirect);\n    }\n    if (error === 'אימייל או סיסמה לא נכונים' && googleName !== '') {\n      dispatch(register(googleName, googleEmail, googleId));\n      setLoginSuccess(true);\n      history.push('/');\n    }\n  }, [history, userInfo, redirect, error, dispatch, googleName, googleEmail, googleId]);\n  const submitHandler = e => {\n    e.preventDefault();\n    dispatch(login(email, password));\n  };\n  const googleLogin = response => {\n    const {\n      profileObj: {\n        name,\n        email\n      },\n      googleId\n    } = response;\n    setGoogleEmail(email);\n    setGoogleName(name);\n    setGoogleId(googleId);\n    if (email) {\n      dispatch(login(email, googleId));\n    } else {\n      setMessage('חלה שגיאה. יש לנסות שוב');\n      setTimeout(() => {\n        setMessage(null);\n      }, 2500);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Ecommerce | 3D\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FormContainer, {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"TITLE\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 7\n      }, this), message && /*#__PURE__*/_jsxDEV(Message, {\n        variant: \"danger\",\n        classN: \"alert-wide\",\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this), !loginSuccess && error && /*#__PURE__*/_jsxDEV(Message, {\n        variant: \"danger\",\n        classN: \"alert-wide\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this), loading && /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"EMAIL\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        onSubmit: submitHandler,\n        children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n          controlId: \"email\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"\\u05DB\\u05EA\\u05D5\\u05D1\\u05EA \\u05D3\\u05D5\\u05D0\\\"\\u05DC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"email\",\n            placeholder: \"email\",\n            value: email,\n            onChange: e => setEmail(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          controlId: \"password\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"\\u05E1\\u05D9\\u05E1\\u05DE\\u05D4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"password\",\n            value: password,\n            onChange: e => setPassword(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          className: \"btn-brand\",\n          type: \"submit\",\n          children: \"Ingresar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"py-3\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          children: [\"Ingresar\", ' ', /*#__PURE__*/_jsxDEV(Link, {\n            to: redirect ? `/register?redirect=${redirect}` : '/register',\n            children: \"Registrear\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(LoginScreen, \"fN7NcYfPGXYra4NWRZDwBR9aLB8=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c = LoginScreen;\nexport default LoginScreen;\nvar _c;\n$RefreshReg$(_c, \"LoginScreen\");","map":{"version":3,"names":["React","useState","useEffect","Link","Form","Button","Row","Col","useDispatch","useSelector","Helmet","Message","FormContainer","Spinner","login","register","jsxDEV","_jsxDEV","Fragment","_Fragment","LoginScreen","_ref","_s","location","history","email","setEmail","password","setPassword","message","setMessage","googleName","setGoogleName","googleEmail","setGoogleEmail","googleId","setGoogleId","loginSuccess","setLoginSuccess","dispatch","userLogin","state","loading","error","userInfo","redirect","search","split","push","submitHandler","e","preventDefault","googleLogin","response","profileObj","name","setTimeout","children","fileName","_jsxFileName","lineNumber","columnNumber","variant","classN","onSubmit","Group","controlId","Label","Control","type","placeholder","value","onChange","target","className","to","_c","$RefreshReg$"],"sources":["/Users/echavezp/Desktop/Mauricio/UPC/20231/PI1/CODIGO/ecommerce-mern-heroku/frontend/src/screens/LoginScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport { Form, Button, Row, Col } from 'react-bootstrap'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { Helmet } from 'react-helmet'\nimport Message from '../components/Message'\nimport FormContainer from '../components/FormContainer'\nimport Spinner from '../components/layout/Spinner'\nimport { login, register } from '../actions/userActions'\n\nconst LoginScreen = ({ location, history }) => {\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const [message, setMessage] = useState(null)\n\n  const [googleName, setGoogleName] = useState('')\n  const [googleEmail, setGoogleEmail] = useState('')\n  const [googleId, setGoogleId] = useState('')\n  const [loginSuccess, setLoginSuccess] = useState(false)\n\n  const dispatch = useDispatch()\n\n  const userLogin = useSelector((state) => state.userLogin)\n  const { loading, error, userInfo } = userLogin\n\n  const redirect = location.search ? location.search.split('=')[1] : '/'\n\n  useEffect(() => {\n    if (userInfo) {\n      history.push(redirect)\n    }\n\n    if (error === 'אימייל או סיסמה לא נכונים' && googleName !== '') {\n      dispatch(register(googleName, googleEmail, googleId))\n      setLoginSuccess(true)\n      history.push('/')\n    }\n  }, [\n    history,\n    userInfo,\n    redirect,\n    error,\n    dispatch,\n    googleName,\n    googleEmail,\n    googleId,\n  ])\n\n  const submitHandler = (e) => {\n    e.preventDefault()\n    dispatch(login(email, password))\n  }\n\n  const googleLogin = (response) => {\n    const {\n      profileObj: { name, email },\n      googleId,\n    } = response\n\n    setGoogleEmail(email)\n    setGoogleName(name)\n    setGoogleId(googleId)\n\n    if (email) {\n      dispatch(login(email, googleId))\n    } else {\n      setMessage('חלה שגיאה. יש לנסות שוב')\n      setTimeout(() => {\n        setMessage(null)\n      }, 2500)\n    }\n  }\n\n  return (\n    <>\n      <Helmet>\n        <title>Ecommerce | 3D</title>\n      </Helmet>\n      <FormContainer>\n      <h1>TITLE</h1>\n        {message && (\n          <Message variant='danger' classN='alert-wide'>\n            {message}\n          </Message>\n        )}\n        {!loginSuccess && error && (\n          <Message variant='danger' classN='alert-wide'>\n            {error}\n          </Message>\n        )}\n        {loading && <Spinner />}\n        {/* <GoogleLogin\n          clientId='816282195701-kdd4l2l5bnun3kbpsq8kqcusfb1cjkcr.apps.googleusercontent.com'\n          onSuccess={googleLogin}\n          onFailure={googleLogin}\n          buttonText='כניסה באמצעות Google'\n          className='google-login'\n        />\n        <h2>או כניסה עם סיסמה</h2> */}\n        <h2>EMAIL</h2>\n        <Form onSubmit={submitHandler}>\n          <Form.Group controlId='email'>\n            <Form.Label>כתובת דוא\"ל</Form.Label>\n            <Form.Control\n              type='email'\n              placeholder='email'\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n            ></Form.Control>\n          </Form.Group>\n          <Form.Group controlId='password'>\n            <Form.Label>סיסמה</Form.Label>\n            <Form.Control\n              type='password'\n              \n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n            ></Form.Control>\n          </Form.Group>\n          <Button className='btn-brand' type='submit'>\n    Ingresar\n          </Button>\n        </Form>\n        <Row className='py-3'>\n          <Col>\n        Ingresar{' '}\n            <Link\n              to={redirect ? `/register?redirect=${redirect}` : '/register'}\n            >\n              Registrear\n            </Link>\n          </Col>\n        </Row>\n      </FormContainer>\n    </>\n  )\n}\n\nexport default LoginScreen\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}